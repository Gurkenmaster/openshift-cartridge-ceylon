<!DOCTYPE html><html xmlns='http://www.w3.org/1999/xhtml'><head><meta charset='UTF-8'/>
<title>annotations.ceylon</title><link href='../.resources/shCore.css' rel='stylesheet' type='text/css'/>
<link href='../.resources/shThemeDefault.css' rel='stylesheet' type='text/css'/>
<script type='text/javascript' src='../.resources/jquery-1.8.2.min.js'></script><script type='text/javascript' src='../.resources/ceylondoc.js'></script><script src='../.resources/shCore.js' type='text/javascript'></script><script src='../.resources/shBrushCeylon.js' type='text/javascript'></script></head><body><pre class='brush: ceylon'>/*
 * Do we really need to enforce that you can&apos;t 
 * ask for the annotations of a certain type for a
 * certain program element unless the annotation 
 * type can appear at that program element? Why not
 * just return no annotations?
 * 
 */

shared Values annotations&lt;Value,Values,ProgramElement&gt;(
              Type&lt;ConstrainedAnnotation&lt;Value,Values,ProgramElement&gt;&gt; annotationType,
              ProgramElement programElement)
           given Value satisfies ConstrainedAnnotation&lt;Value,Values,ProgramElement&gt;
           //given Values of (Value?) | (Value[])
           given ProgramElement satisfies Annotated { throw; }

shared Value? optionalAnnotation&lt;Value,ProgramElement&gt;(
            Type&lt;OptionalAnnotation&lt;Value,ProgramElement&gt;&gt; annotationType,
            ProgramElement programElement)
        given Value satisfies OptionalAnnotation&lt;Value,ProgramElement&gt;
        given ProgramElement satisfies Annotated { 
    return annotations&lt;Value,Value?,ProgramElement&gt;(annotationType, programElement); 
}

shared Value[] sequencedAnnotations&lt;Value,ProgramElement&gt;(
            Type&lt;SequencedAnnotation&lt;Value,ProgramElement&gt;&gt; annotationType,
            ProgramElement programElement)
        given Value satisfies SequencedAnnotation&lt;Value,ProgramElement&gt;
        given ProgramElement satisfies Annotated { 
    return annotations&lt;Value,Value[],ProgramElement&gt;(annotationType, programElement); 
}
</pre></body></html>